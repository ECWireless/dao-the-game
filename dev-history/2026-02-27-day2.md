# Day 2 - 2026-02-27

## Major Decisions

- Built a playable mobile-first vertical slice with deterministic sim wiring and a centralized Zustand game store.
- Added local persistence via Zustand `persist` so refresh does not wipe progress (`gameStore` + view mode state).
- Reframed onboarding as an app-within-phone narrative flow (`Messages`, `Mail`, `Whiteboard`, `RaidGuild`, `Machine`) with scripted forward momentum.
- Locked chat interactions to prewritten player drafts with explicit `Send` taps (no freeform typing) to keep pacing and clarity.
- Shaped tutorial outcomes intentionally: first production run fails, second run passes after role expansion.
- Removed Shell/Engine frontend presentation controls while keeping simulation internals and diagnostics logic under the hood.

## UX / Visual Evolution

- Started with a mission-to-result stepper and tycoon-forward UI scaffolding.
- Shifted to phone-native app switching via persistent bottom dock and context-specific app chrome.
- Implemented full phone framing (status bar, notch, wallpaper personality details, dock, app standby states).
- Added execution lock during machine run so cinematic sequences cannot be interrupted.
- Iterated visual direction from B/B (neon Android-custom) to A/A preview:
  - cleaner iOS-like shell with eccentric custom touches,
  - icon-origin app launch motion instead of directional slide,
  - dock icon pulse feedback on app tap.

## Motion / Narrative Systems

- Added scripted scene timeline (14 scenes) covering accidental contract -> panic -> first failed delivery -> rebuild -> successful approval.
- Added staggered motion for chat bubbles, notification entries, guild candidate responses, and machine phase lamps.
- Added machine pipeline sequencing with phase progression and deferred score reveal behavior.

## System / State Changes

- Added/expanded level configs: tutorial + story sequencing.
- Refactored store for story progression and role unlock control:
  - `storySceneIndex`,
  - `unlockedRoleCount`,
  - `advanceStory`, `retreatStory`, `unlockExpandedRoles`,
  - role filtering via active-role helpers.
- Added run shaping + persistence-safe migration bump (`dao-the-game:state:v2`).
- Enforced unique agent assignment and kept run cost/runway helpers in store.

## Tradeoffs

- Local persistence is browser-local only (no cross-device sync).
- Scripted rails prioritize demo comprehension/speed over sandbox freedom.
- Forced fail/pass sequencing improves tutorial arc but temporarily reduces replay variance in early runs.

## Verification

- Added/updated tests for store gating, persistence behavior, story progression, role unlocks, and run outcome shaping.
- Verified with:
  - `pnpm test`
  - `pnpm typecheck`
  - `pnpm lint`
  - `pnpm build`

## Follow-up Ideas

- Tune app-launch timing and dock translucency after device QA.
- Add subtle haptic-like animation cues for notifications and app taps.
- Increase per-app micro-branding and personalization without hurting readability.
- Add optional fast-forward/skip for repeat demo runs.
